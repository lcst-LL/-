# -
交通公共数据集

PeMS数据官网：https://opendata.sz.gov.cn/
https://pems.dot.ca.gov/

选择了公共的交通流数据集来全面评估我们模型的性能。
数据集作为机器学习项目中的基础资源，提供了用于训练模型的必要信息。在交通流量预测的场景下，数据集包含了不同时间段、不同区域的交通流量数据。通过对这些数据的分析和学习，模型能够预测未来的交通流量情况，对于城市规划、交通管理以及为驾驶者提供实时交通信息等方面具有重要价值。

METR-LA（Metro Traffic Los Angeles）数据集是一个用于交通流量预测的常用数据集，主要用于研究和评估交通预测算法的性能。该数据集包含了洛杉矶地区的交通传感器数据，可以用于建立和验证交通流量预测模型。此数据集包含从 2012年3月1日至 2012年6 月 30 日期间从洛杉矶县高速公路系统的 207 个传感器收集的交通速度数据。本数据集是在洛杉矶县的高速公路上通过环路检测器实时收集的。我们选取了2012年3月1日至3月7日期间的207个传感器及其交通速度。每5分钟汇总一次交通速度。相似性，数据总结出一个邻接矩阵和一个特征矩阵。邻接矩阵是由交通网络中传感器之间的距离计算出来的。由于Los-loop数据集包含一些缺失的数据，本文使用线性插值法来填补缺失值。
METR-LA数据集的格式通常是时间序列数据，其中包含了交通传感器在不同时间点上的流量信息。timestamp：时间戳，表示观测的时间点。flow（或类似指标）：表示在该时间点上的交通流量，通常是车辆通过传感器的数量。包括其他相关的特征，如速度、密度等，以更全面地描述交通状况

PEMS-BAY，数据集由2017年1月1日至2017年5月 31 日的 6 个月数据。由湾区高速公路上 325 个传感器采集的交通流速组成。
PEMS代表Performance Measurement System，这是专门用于收集交通数据的系统。PEMS系统部署在加州的多个地区，收集有关交通流量、速度、占用率等数据，以评估公路网络的性能。在数据集名称中出现的"bay"部分，可能是指该数据集是针对加州湾区（Bay Area）的，湾区是一个拥有众多交通数据监测站的地区，这些监测站可以提供高分辨率的交通流量和速度数据。PEMS-bay因此可以被视作是研究和开发交通流量预测模型的宝贵资源。
PeMS中有四个不同的地图:实时地图、性能地图、库存地图和搜索地图（Real-Time Map, the Performance Map, the Inventory Map, and the Search Map）。
PeMS提供多种类型的性能度量图和图表，如流量或速度的聚合图、服务水平条形图、区域数量饼图、速度等高线图和拥塞概述图。
此交通数据集由加利福尼亚交通局 （CalTrans） 绩效测量系统 （PeMS） 收集。我们在湾区选择了 325 个传感器，并收集了 2017 年 1 月 1 日至 2017 年 5 月 31 日的 6 个月数据进行实验。各种性能数据可用，如容量、速度、延迟、车辆行驶里程(VMT)、车辆行驶小时(VHT)、行驶时间和年平均日交通流量(AADT)；

PEMS-03
流数据聚合为 5 分钟，这意味着每小时的流数据中有 12 个点

PEMS04.本数据集来源于PeMS网站，包含了从旧金山湾区（美国加尼福尼亚州旧金山大湾区）29条高速公路上的3848个探测器收集的交通流量、占用率和速度数据。时间跨度为2018年1月1日至2018年2月28日期间的数据。这些探测器每5分钟收集一次数据，记录了3848个传感器每5分钟经过的车辆数。特点:高频次采样率，能够捕捉短时间内的交通变化情况，PEMS04是来自PeMS（Performance Measurement System）网站的交通数据集，聚焦于美国加利福尼亚州旧金山湾区的交通网络。该数据集以精细的时间分辨率和广泛的空间覆盖范围，为交通研究者和工程师提供了宝贵的数据资源。数据集中的时间序列信息包括速度、流量和时间占有率，能够反映该时间段内各高速公路上的交通状况。 数据集中的交通信息是按节点组织的，每个节点代表一个交通探测器。在这个数据集中，节点数量为307，特征数为3，时长为59天，时间窗口为5分钟。节点的特征可能包括速度、流量和时间占有率等，这些数据对于分析交通流和进行预测至关重要。数据集还包含了307*307的邻接矩阵文件，该矩阵反映了307个路口之间的相邻情况，即路口间的连通性。每个矩阵元素可以表示路口间的距离或是连接性（如1表示连接，0表示不连接）。这个邻接矩阵是理解交通网络结构以及分析不同路口间交通流相关性的关键。 

PEMS-07
PeMSD7 由部署在加利福尼亚州公路系统主要大都市地区的超过 39， 000 个传感器站从 Caltrans 性能测量系统 （PeMS） 实时收集。该数据集还会从 30 秒的数据样本聚合到 5 分钟的间隔。我们在加利福尼亚州第 7 区随机选择中等和大规模，包含 228 个和 1， 026 个站点，分别标记为 PeMSD7（M） 和 PeMSD7（L） 作为数据源。PeMSD7 数据集的时间范围在 2012 年 5 月和 6 月的工作日。我们选择历史速度记录的第一个月作为训练集，其余的分别作为验证集和测试集。流数据聚合为 5 分钟，这意味着每小时流数据中有 12 个点。此文件夹应包含两个 csv 文件。一个文件包含每对顶点之间的距离 （km），它有 n 行和 n 列，其中 n 是顶点的数量。另一个 csv 文件包含 n 列和大量行，每行代表一个时间步长包含顶点间距离，每列代表一个顶点的时间序列。
PEMS07 同样来自 PEMS 系统，记录了2007年期间加利福尼亚州高速公路系统的运行状态。此版本增加了更多路段的信息覆盖范围，并改进了部分技术细节

PEMS08.此数据集包含从加利福尼亚州 8 条高速公路上的170 个传感器收集的交通数据。与PEMS04 类似，它由三个功能组成:流量、占用率和速度。数据集的时间跨度为 2018年7月至8月交通流数据聚合为 5 分钟，这意味着每小时流数据中有 12 个点。它包含 1979 条道路上的 8 个探测器。该数据集的时间跨度为 2016 年 7 月至 8 月。PEMS08是一个精心策划的数据宝藏，由1979个传感器构成，分布在8条主要高速公路上，每五分钟记录一次包括交通流量、速度及时间占有率在内的三大核心特征。其时间跨度长达61天，不仅提供连续性时间序列分析的基础，而且通过3个关键特征，展现了复杂交通系统的多维度视角。此外，附带的邻接矩阵，作为网络分析的关键，揭示了交通网的结构逻辑，为研究人员打开了一扇理解大规模交通网络动态的新窗户。

在北弗吉尼亚州/华盛顿特区首府地区两条主要高速公路沿线的 36 个传感器位置每 15 分钟测量一次交通量。这 47 个要素包括：1） 在最近的 10 个采样点（10 个要素）期间感应到的交通量的历史序列，2） 工作日（7 个要素），3） 一天中的某个小时（24 个要素），4） 道路方向（4 个要素），5） 车道数（1 个要素），以及 6） 道路名称（1 个要素）。目标是预测未来 15 分钟内所有传感器位置的交通量。通过给定的道路网络，我们知道传感器位置之间的空间连通性。
明尼苏达州 DoT ATR 站 301 的每小时 94 号州际公路西行交通量，大约位于明尼阿波利斯和明尼苏达州圣保罗之间。包括每小时天气功能和假期，以影响交通量。GitHub - uci-ml-repo/ucimlrepo：用于从 UCI ML 存储库导入数据集的 Python 包



我们的实验考虑了三种流量测量，包括总流量、平均速度和平均占用率。PeMS-04 和 PeMS-08 经过预处理，以确保数据集中任何相邻探测器之间的距离超过 3.5 英里。最后，PeMSD4 中有 307 个探测器，PeMSD8 中有 170 个探测器。流量数据每 5 分钟聚合一次，因此每个检测器每天包含 288 个数据点。
 
平均占有率：占有率分为时间占有率和空间占有率，是衡量道路被利用程度的重要指标(我认为它也衡量了拥挤程度)。其中，空间占有率是指在观测时间内，观测路段中各车辆所占道路面积总量与区域道路面积总量的比值；时间占有率是指在观测时间内通过道路某断面的累计时间与该段时间的比值。平均占有率的话取个平均就是了。

数据集划分是机器学习模型训练中的一个关键步骤，目的是为了评估模型的泛化能力。在模型训练过程中，我们需要有独立的测试集来评估模型的预测效果，以确保模型不是单纯记忆了训练数据，而是能够适应新的、未见过的数据。通常情况下，我们会将原始数据集分为三个部分： 1. 训练集：用于模型的训练过程，模型在这个数据集上学习交通流量的特征和模式。 2. 验证集：在模型训练阶段用于模型选择、超参数调整和提前停止，帮助我们找到最佳的模型参数。 3. 测试集：在模型训练完成之后用于最终的性能评估，模型将在这个数据集上展示其泛化能力。训练集、测试集和验证集的比例为0.6:0.2:0.2。将原始数据集被分为三个部分，其中60%用于训练模型，20%用于验证模型，剩余的20%用于测试模型。这种划分方式有助于保持数据分布的一致性，同时也能给模型提供充足的训练样本和评估样本。 在划分数据集时，我们需要注意数据的时间顺序和完整性。交通流量数据是时间序列数据，因此在划分数据集时，应按照时间顺序来划分，保证训练集中的数据比验证集和测试集中的数据要早，以模拟实际情况下模型需要根据过去的数据预测未来的情况。 除此之外，在进行数据集划分时，还需要考虑数据的代表性和多样性。理想情况下，每个数据集（训练集、验证集、测试集）都应该能够代表整体数据的特点，这样模型的评估才能更加准确。 

在本例中，将METR-LA数据集和PEMS-bay数据集都按照0.6:0.2:0.2的比例进行划分，意味着我们有两组不同的数据集，但它们都被用于相似的目的和过程。PEMS-bay是另一个在交通流量预测领域广泛使用的大规模数据集，收集了加州湾区高速公路网络的交通数据。与METR-LA一样，对PEMS-bay数据集的划分也遵循了相同的比例，以确保对两个不同地区数据的均衡处理和模型验证。 

个别检波器站(VDS)偶尔会发生故障、停止工作或停止发送数据。这些错误可能因各种原因发生，包括错误的连接、通信丢失或控制器故障。每当这些错误发生时，数据集就会出现空白。没有完整的数据集(至少没有明显的不准确性)，绩效度量是无法估计的。PeMS会使用一种称为数据输入的过程估计数据(为了计算性能度量)。该过程包括全面的算法，以填补空白的数据集与准确的估计。基于局部系数的邻接线性回归——数据空白是通过来自同一位置邻近车道的检测器以及直接上下游位置的检测器的信息来填充的；基于全局系数的邻居线性回归——当PeMS确定某些检测器从未报告合理的数据时，系统会查看整个区域的检测器数据中的一般关系，以填补空白；临时中间值——pem查看长时间内相似时间和每周天数的数据值。这些数据值的中位数用于填补空白；集群中值——PeMS检查一周内来自具有类似流量模式的检测器的数据，以填补数据空白。
